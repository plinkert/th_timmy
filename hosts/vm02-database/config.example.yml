# VM-02: Database Configuration
# Copy this file to config.yml and fill in values

# PostgreSQL Configuration
postgresql:
  # PostgreSQL version (default 14 for Ubuntu 22.04)
  version: "14"
  
  # Database name
  database_name: "threat_hunting"
  
  # Database user
  database_user: "threat_hunter"
  
  # PASSWORD - REQUIRED - fill in before use!
  database_password: "CHANGE_ME_STRONG_PASSWORD"
  
  # PostgreSQL port (default 5432)
  port: 5432
  
  # Maximum number of connections
  max_connections: 100
  
  # Shared buffers (adjust to available RAM)
  shared_buffers: "256MB"
  
  # Effective cache size (adjust to available RAM)
  effective_cache_size: "1GB"

# Network Configuration
network:
  # IP addresses of VMs that should have access to the database
  # Format: list of IPs with mask (e.g. 192.168.1.100/32)
  allowed_ips:
    - "127.0.0.1/32"  # localhost
    # - "192.168.1.100/32"  # VM-01
    # - "192.168.1.101/32"  # VM-03
    # Add IPs of other VMs here

# Data Retention Configuration
retention:
  # Retention period in days (default: 90 days)
  retention_days: 90
  
  # Enable automatic cleanup of old data
  auto_cleanup: true
  
  # Cleanup schedule (cron format)
  # Daily at 3:00 AM
  cleanup_schedule: "0 3 * * *"
  
  # Tables to apply retention (empty = all tables with created_at/timestamp columns)
  # If empty, cleanup will apply to all tables with timestamp columns
  # tables: []
  
  # Enable logging of cleanup operations
  log_cleanup: true

# Backup Configuration
backup:
  # Enable automatic backups
  enabled: true
  
  # Backup directory
  backup_dir: "/var/backups/postgresql"
  
  # Backup schedule (cron format)
  # Example: daily at 2:00
  schedule: "0 2 * * *"
